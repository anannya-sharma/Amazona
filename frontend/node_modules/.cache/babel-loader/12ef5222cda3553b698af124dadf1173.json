{"ast":null,"code":"import _toConsumableArray from\"C:/Users/anann/Downloads/amazona-master/amazona-master/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Link,useParams,useNavigate}from'react-router-dom';import{listProducts}from'../actions/productActions';import LoadingBox from'../components/LoadingBox';import MessageBox from'../components/MessageBox';import Product from'../components/Product';import Rating from'../components/Rating';import{prices,ratings}from'../utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function SearchScreen(props){var navigate=useNavigate();var _useParams=useParams(),_useParams$name=_useParams.name,name=_useParams$name===void 0?'all':_useParams$name,_useParams$category=_useParams.category,category=_useParams$category===void 0?'all':_useParams$category,_useParams$min=_useParams.min,min=_useParams$min===void 0?0:_useParams$min,_useParams$max=_useParams.max,max=_useParams$max===void 0?0:_useParams$max,_useParams$rating=_useParams.rating,rating=_useParams$rating===void 0?0:_useParams$rating,_useParams$order=_useParams.order,order=_useParams$order===void 0?'newest':_useParams$order,_useParams$pageNumber=_useParams.pageNumber,pageNumber=_useParams$pageNumber===void 0?1:_useParams$pageNumber;var dispatch=useDispatch();var productList=useSelector(function(state){return state.productList;});var loading=productList.loading,error=productList.error,products=productList.products,page=productList.page,pages=productList.pages;var productCategoryList=useSelector(function(state){return state.productCategoryList;});var loadingCategories=productCategoryList.loading,errorCategories=productCategoryList.error,categories=productCategoryList.categories;useEffect(function(){dispatch(listProducts({pageNumber:pageNumber,name:name!=='all'?name:'',category:category!=='all'?category:'',min:min,max:max,rating:rating,order:order}));},[category,dispatch,max,min,name,order,rating,pageNumber]);var getFilterUrl=function getFilterUrl(filter){var filterPage=filter.page||pageNumber;var filterCategory=filter.category||category;var filterName=filter.name||name;var filterRating=filter.rating||rating;var sortOrder=filter.order||order;var filterMin=filter.min?filter.min:filter.min===0?0:min;var filterMax=filter.max?filter.max:filter.max===0?0:max;return\"/search/category/\".concat(filterCategory,\"/name/\").concat(filterName,\"/min/\").concat(filterMin,\"/max/\").concat(filterMax,\"/rating/\").concat(filterRating,\"/order/\").concat(sortOrder,\"/pageNumber/\").concat(filterPage);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[loading?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(\"div\",{children:[products.length,\" Results\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Sort by\",' ',/*#__PURE__*/_jsxs(\"select\",{value:order,onChange:function onChange(e){navigate(getFilterUrl({order:e.target.value}));},children:[/*#__PURE__*/_jsx(\"option\",{value:\"newest\",children:\"Newest Arrivals\"}),/*#__PURE__*/_jsx(\"option\",{value:\"lowest\",children:\"Price: Low to High\"}),/*#__PURE__*/_jsx(\"option\",{value:\"highest\",children:\"Price: High to Low\"}),/*#__PURE__*/_jsx(\"option\",{value:\"toprated\",children:\"Avg. Customer Reviews\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row top\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-1\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Department\"}),/*#__PURE__*/_jsx(\"div\",{children:loadingCategories?/*#__PURE__*/_jsx(LoadingBox,{}):errorCategories?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:errorCategories}):/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{className:'all'===category?'active':'',to:getFilterUrl({category:'all'}),children:\"Any\"})}),categories.map(function(c){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{className:c===category?'active':'',to:getFilterUrl({category:c}),children:c})},c);})]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"ul\",{children:prices.map(function(p){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:getFilterUrl({min:p.min,max:p.max}),className:\"\".concat(p.min,\"-\").concat(p.max)===\"\".concat(min,\"-\").concat(max)?'active':'',children:p.name})},p.name);})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Avg. Customer Review\"}),/*#__PURE__*/_jsx(\"ul\",{children:ratings.map(function(r){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:getFilterUrl({rating:r.rating}),className:\"\".concat(r.rating)===\"\".concat(rating)?'active':'',children:/*#__PURE__*/_jsx(Rating,{caption:' & up',rating:r.rating})})},r.name);})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-3\",children:loading?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[products.length===0&&/*#__PURE__*/_jsx(MessageBox,{children:\"No Product Found\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row center\",children:products.map(function(product){return/*#__PURE__*/_jsx(Product,{product:product},product._id);})}),/*#__PURE__*/_jsx(\"div\",{className:\"row center pagination\",children:_toConsumableArray(Array(pages).keys()).map(function(x){return/*#__PURE__*/_jsx(Link,{className:x+1===page?'active':'',to:getFilterUrl({page:x+1}),children:x+1},x+1);})})]})})]})]});}","map":{"version":3,"sources":["C:/Users/anann/Downloads/amazona-master/amazona-master/frontend/src/screens/SearchScreen.js"],"names":["React","useEffect","useDispatch","useSelector","Link","useParams","useNavigate","listProducts","LoadingBox","MessageBox","Product","Rating","prices","ratings","SearchScreen","props","navigate","name","category","min","max","rating","order","pageNumber","dispatch","productList","state","loading","error","products","page","pages","productCategoryList","loadingCategories","errorCategories","categories","getFilterUrl","filter","filterPage","filterCategory","filterName","filterRating","sortOrder","filterMin","filterMax","length","e","target","value","map","c","p","r","product","_id","Array","keys","x"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useParams, useNavigate } from 'react-router-dom';\nimport { listProducts } from '../actions/productActions';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nimport Product from '../components/Product';\nimport Rating from '../components/Rating';\nimport { prices, ratings } from '../utils';\n\nexport default function SearchScreen(props) {\n  const navigate = useNavigate();\n  const {\n    name = 'all',\n    category = 'all',\n    min = 0,\n    max = 0,\n    rating = 0,\n    order = 'newest',\n    pageNumber = 1,\n  } = useParams();\n  const dispatch = useDispatch();\n  const productList = useSelector((state) => state.productList);\n  const { loading, error, products, page, pages } = productList;\n\n  const productCategoryList = useSelector((state) => state.productCategoryList);\n  const {\n    loading: loadingCategories,\n    error: errorCategories,\n    categories,\n  } = productCategoryList;\n  useEffect(() => {\n    dispatch(\n      listProducts({\n        pageNumber,\n        name: name !== 'all' ? name : '',\n        category: category !== 'all' ? category : '',\n        min,\n        max,\n        rating,\n        order,\n      })\n    );\n  }, [category, dispatch, max, min, name, order, rating, pageNumber]);\n\n  const getFilterUrl = (filter) => {\n    const filterPage = filter.page || pageNumber;\n    const filterCategory = filter.category || category;\n    const filterName = filter.name || name;\n    const filterRating = filter.rating || rating;\n    const sortOrder = filter.order || order;\n    const filterMin = filter.min ? filter.min : filter.min === 0 ? 0 : min;\n    const filterMax = filter.max ? filter.max : filter.max === 0 ? 0 : max;\n    return `/search/category/${filterCategory}/name/${filterName}/min/${filterMin}/max/${filterMax}/rating/${filterRating}/order/${sortOrder}/pageNumber/${filterPage}`;\n  };\n  return (\n    <div>\n      <div className=\"row\">\n        {loading ? (\n          <LoadingBox></LoadingBox>\n        ) : error ? (\n          <MessageBox variant=\"danger\">{error}</MessageBox>\n        ) : (\n          <div>{products.length} Results</div>\n        )}\n        <div>\n          Sort by{' '}\n          <select\n            value={order}\n            onChange={(e) => {\n              navigate(getFilterUrl({ order: e.target.value }));\n            }}\n          >\n            <option value=\"newest\">Newest Arrivals</option>\n            <option value=\"lowest\">Price: Low to High</option>\n            <option value=\"highest\">Price: High to Low</option>\n            <option value=\"toprated\">Avg. Customer Reviews</option>\n          </select>\n        </div>\n      </div>\n      <div className=\"row top\">\n        <div className=\"col-1\">\n          <h3>Department</h3>\n          <div>\n            {loadingCategories ? (\n              <LoadingBox></LoadingBox>\n            ) : errorCategories ? (\n              <MessageBox variant=\"danger\">{errorCategories}</MessageBox>\n            ) : (\n              <ul>\n                <li>\n                  <Link\n                    className={'all' === category ? 'active' : ''}\n                    to={getFilterUrl({ category: 'all' })}\n                  >\n                    Any\n                  </Link>\n                </li>\n                {categories.map((c) => (\n                  <li key={c}>\n                    <Link\n                      className={c === category ? 'active' : ''}\n                      to={getFilterUrl({ category: c })}\n                    >\n                      {c}\n                    </Link>\n                  </li>\n                ))}\n              </ul>\n            )}\n          </div>\n          <div>\n            <h3>Price</h3>\n            <ul>\n              {prices.map((p) => (\n                <li key={p.name}>\n                  <Link\n                    to={getFilterUrl({ min: p.min, max: p.max })}\n                    className={\n                      `${p.min}-${p.max}` === `${min}-${max}` ? 'active' : ''\n                    }\n                  >\n                    {p.name}\n                  </Link>\n                </li>\n              ))}\n            </ul>\n          </div>\n          <div>\n            <h3>Avg. Customer Review</h3>\n            <ul>\n              {ratings.map((r) => (\n                <li key={r.name}>\n                  <Link\n                    to={getFilterUrl({ rating: r.rating })}\n                    className={`${r.rating}` === `${rating}` ? 'active' : ''}\n                  >\n                    <Rating caption={' & up'} rating={r.rating}></Rating>\n                  </Link>\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n        <div className=\"col-3\">\n          {loading ? (\n            <LoadingBox></LoadingBox>\n          ) : error ? (\n            <MessageBox variant=\"danger\">{error}</MessageBox>\n          ) : (\n            <>\n              {products.length === 0 && (\n                <MessageBox>No Product Found</MessageBox>\n              )}\n              <div className=\"row center\">\n                {products.map((product) => (\n                  <Product key={product._id} product={product}></Product>\n                ))}\n              </div>\n              <div className=\"row center pagination\">\n                {[...Array(pages).keys()].map((x) => (\n                  <Link\n                    className={x + 1 === page ? 'active' : ''}\n                    key={x + 1}\n                    to={getFilterUrl({ page: x + 1 })}\n                  >\n                    {x + 1}\n                  </Link>\n                ))}\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}