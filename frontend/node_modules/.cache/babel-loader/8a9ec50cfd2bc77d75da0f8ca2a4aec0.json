{"ast":null,"code":"import _toConsumableArray from\"C:/Users/anann/Downloads/amazona-master/amazona-master/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Link,useParams,useNavigate,useLocation}from'react-router-dom';import{createProduct,deleteProduct,listProducts}from'../actions/productActions';import LoadingBox from'../components/LoadingBox';import MessageBox from'../components/MessageBox';import{PRODUCT_CREATE_RESET,PRODUCT_DELETE_RESET}from'../constants/productConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ProductListScreen(props){var navigate=useNavigate();var _useParams=useParams(),_useParams$pageNumber=_useParams.pageNumber,pageNumber=_useParams$pageNumber===void 0?1:_useParams$pageNumber;var _useLocation=useLocation(),pathname=_useLocation.pathname;var sellerMode=pathname.indexOf('/seller')>=0;var productList=useSelector(function(state){return state.productList;});var loading=productList.loading,error=productList.error,products=productList.products,page=productList.page,pages=productList.pages;var productCreate=useSelector(function(state){return state.productCreate;});var loadingCreate=productCreate.loading,errorCreate=productCreate.error,successCreate=productCreate.success,createdProduct=productCreate.product;var productDelete=useSelector(function(state){return state.productDelete;});var loadingDelete=productDelete.loading,errorDelete=productDelete.error,successDelete=productDelete.success;var userSignin=useSelector(function(state){return state.userSignin;});var userInfo=userSignin.userInfo;var dispatch=useDispatch();useEffect(function(){if(successCreate){dispatch({type:PRODUCT_CREATE_RESET});navigate(\"/product/\".concat(createdProduct._id,\"/edit\"));}if(successDelete){dispatch({type:PRODUCT_DELETE_RESET});}dispatch(listProducts({seller:sellerMode?userInfo._id:'',pageNumber:pageNumber}));},[createdProduct,dispatch,navigate,sellerMode,successCreate,successDelete,userInfo._id,pageNumber]);var deleteHandler=function deleteHandler(product){if(window.confirm('Are you sure to delete?')){dispatch(deleteProduct(product._id));}};var createHandler=function createHandler(){dispatch(createProduct());};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Products\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"primary\",onClick:createHandler,children:\"Create Product\"})]}),loadingDelete&&/*#__PURE__*/_jsx(LoadingBox,{}),errorDelete&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:errorDelete}),loadingCreate&&/*#__PURE__*/_jsx(LoadingBox,{}),errorCreate&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:errorCreate}),loading?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PRICE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"CATEGORY\"}),/*#__PURE__*/_jsx(\"th\",{children:\"BRAND\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ACTIONS\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.map(function(product){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:product._id}),/*#__PURE__*/_jsx(\"td\",{children:product.name}),/*#__PURE__*/_jsx(\"td\",{children:product.price}),/*#__PURE__*/_jsx(\"td\",{children:product.category}),/*#__PURE__*/_jsx(\"td\",{children:product.brand}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"small\",onClick:function onClick(){return navigate(\"/product/\".concat(product._id,\"/edit\"));},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"small\",onClick:function onClick(){return deleteHandler(product);},children:\"Delete\"})]})]},product._id);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row center pagination\",children:_toConsumableArray(Array(pages).keys()).map(function(x){return/*#__PURE__*/_jsx(Link,{className:x+1===page?'active':'',to:\"/productlist/pageNumber/\".concat(x+1),children:x+1},x+1);})})]})]});}","map":{"version":3,"sources":["C:/Users/anann/Downloads/amazona-master/amazona-master/frontend/src/screens/ProductListScreen.js"],"names":["React","useEffect","useDispatch","useSelector","Link","useParams","useNavigate","useLocation","createProduct","deleteProduct","listProducts","LoadingBox","MessageBox","PRODUCT_CREATE_RESET","PRODUCT_DELETE_RESET","ProductListScreen","props","navigate","pageNumber","pathname","sellerMode","indexOf","productList","state","loading","error","products","page","pages","productCreate","loadingCreate","errorCreate","successCreate","success","createdProduct","product","productDelete","loadingDelete","errorDelete","successDelete","userSignin","userInfo","dispatch","type","_id","seller","deleteHandler","window","confirm","createHandler","map","name","price","category","brand","Array","keys","x"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useParams, useNavigate, useLocation } from 'react-router-dom';\nimport {\n  createProduct,\n  deleteProduct,\n  listProducts,\n} from '../actions/productActions';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nimport {\n  PRODUCT_CREATE_RESET,\n  PRODUCT_DELETE_RESET,\n} from '../constants/productConstants';\n\nexport default function ProductListScreen(props) {\n  const navigate = useNavigate();\n  const { pageNumber = 1 } = useParams();\n  const { pathname } = useLocation();\n  const sellerMode = pathname.indexOf('/seller') >= 0;\n  const productList = useSelector((state) => state.productList);\n  const { loading, error, products, page, pages } = productList;\n\n  const productCreate = useSelector((state) => state.productCreate);\n  const {\n    loading: loadingCreate,\n    error: errorCreate,\n    success: successCreate,\n    product: createdProduct,\n  } = productCreate;\n\n  const productDelete = useSelector((state) => state.productDelete);\n  const {\n    loading: loadingDelete,\n    error: errorDelete,\n    success: successDelete,\n  } = productDelete;\n  const userSignin = useSelector((state) => state.userSignin);\n  const { userInfo } = userSignin;\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (successCreate) {\n      dispatch({ type: PRODUCT_CREATE_RESET });\n      navigate(`/product/${createdProduct._id}/edit`);\n    }\n    if (successDelete) {\n      dispatch({ type: PRODUCT_DELETE_RESET });\n    }\n    dispatch(\n      listProducts({ seller: sellerMode ? userInfo._id : '', pageNumber })\n    );\n  }, [\n    createdProduct,\n    dispatch,\n    navigate,\n    sellerMode,\n    successCreate,\n    successDelete,\n    userInfo._id,\n    pageNumber,\n  ]);\n\n  const deleteHandler = (product) => {\n    if (window.confirm('Are you sure to delete?')) {\n      dispatch(deleteProduct(product._id));\n    }\n  };\n  const createHandler = () => {\n    dispatch(createProduct());\n  };\n  return (\n    <div>\n      <div className=\"row\">\n        <h1>Products</h1>\n        <button type=\"button\" className=\"primary\" onClick={createHandler}>\n          Create Product\n        </button>\n      </div>\n\n      {loadingDelete && <LoadingBox></LoadingBox>}\n      {errorDelete && <MessageBox variant=\"danger\">{errorDelete}</MessageBox>}\n\n      {loadingCreate && <LoadingBox></LoadingBox>}\n      {errorCreate && <MessageBox variant=\"danger\">{errorCreate}</MessageBox>}\n      {loading ? (\n        <LoadingBox></LoadingBox>\n      ) : error ? (\n        <MessageBox variant=\"danger\">{error}</MessageBox>\n      ) : (\n        <>\n          <table className=\"table\">\n            <thead>\n              <tr>\n                <th>ID</th>\n                <th>NAME</th>\n                <th>PRICE</th>\n                <th>CATEGORY</th>\n                <th>BRAND</th>\n                <th>ACTIONS</th>\n              </tr>\n            </thead>\n            <tbody>\n              {products.map((product) => (\n                <tr key={product._id}>\n                  <td>{product._id}</td>\n                  <td>{product.name}</td>\n                  <td>{product.price}</td>\n                  <td>{product.category}</td>\n                  <td>{product.brand}</td>\n                  <td>\n                    <button\n                      type=\"button\"\n                      className=\"small\"\n                      onClick={() => navigate(`/product/${product._id}/edit`)}\n                    >\n                      Edit\n                    </button>\n                    <button\n                      type=\"button\"\n                      className=\"small\"\n                      onClick={() => deleteHandler(product)}\n                    >\n                      Delete\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n          <div className=\"row center pagination\">\n            {[...Array(pages).keys()].map((x) => (\n              <Link\n                className={x + 1 === page ? 'active' : ''}\n                key={x + 1}\n                to={`/productlist/pageNumber/${x + 1}`}\n              >\n                {x + 1}\n              </Link>\n            ))}\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}